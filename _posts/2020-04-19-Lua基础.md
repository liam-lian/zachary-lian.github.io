---
layout: post
category: "Lua"
title:  "Lua基础"
---

简单学习Lua的最基本语法知识。

杂项

```lua
-- 动态语言
-- 脚本语言
```

 基本数据类型

```lua
-- lua基本数据类型包括
-- nil、boolean、number、string、userdata、function、thread和table
print(type(type))    --> function

-- nil ，对于table和全局变量赋值nil，相当于删掉他
tab1={key1=”val1“,key2=”val2“}
tab1.key1=nil  -->删掉

-- number，就是double，所有数字都被看做number类型

-- string
str= [[
	===
	XXXX
	表示多行数据
]]

-- 数字字符串上的算数操作，lua会尝试做转换
”6“+2   -->8
”6“+"2"   -->8

-- 字符串连接
"67”.."2".."str"   -->连接为 672str

-- 字符串求长度
print(#"123")

-- table，table的下标默认是从1开始的
a = {}
a["key"] = "value"
key = 10
a[key] = 22
a[key] = a[key] + 11
for k, v in pairs(a) do
    print(k .. " : " .. v)
end

-- function
function factorial1(n)
    if n == 0 then
        return 1
    else
        return n * factorial1(n - 1)
    end
end
print(factorial1(5))
factorial2 = factorial1
print(factorial2(5))
-- 支持匿名函数，f的第二个参数是一个函数
f(tab, 
    function(key, val)
    	return key .. " = " .. val
	end
)

-- userdata（自定义类型）
-- 用于表示一种由应用程序或 C/C++ 语言库所创建的类型，可以将任意 C/C++ 的任意数据类型的数据（通常是 struct 和 指针）存储到 Lua 变量中调用。

```

变量方位

```lua
-- 访问table下标
t[i]
t.i    -- 当索引为字符串类型时的一种简化写法


```

循环

```lua
-- while
while(condition)
do
   statements
end
-- for
for var=exp1,exp2,exp3 do  
    <执行体>  
end  
-- 泛型for循环
for i,v in ipairs(a) 
	do print(v) 
end  
-- repeat..while，直到满足condition，循环结束
repeat
   statements
util( condition )
```

条件

```lua
-- lua中只有nil和false为假。其他为真。例如0是真的
if( 布尔表达式 1)
then
    -- 
else if( 布尔表达式 2)
    --
else 
   --
end
```

函数

```lua
-- 支持多返回值
function maximum (a)
    local mi = 1             
    local m = a[mi]          
    return m, mi
end
-- 变长参数
function average(...)
   result = 0
   local arg={...}
   for i,v in ipairs(arg) do
      result = result + v
   end
   print("总共传入 " .. #arg .. " 个数")
   return result/#arg
end
```

运算符

```lua
~=  --不等于
x^y --取幂
-- 逻辑运算符为 and or not
```

字符串操作

```lua
string.upper(argument):
string.lower(argument):

--在字符串中替换,mainString为要替换的字符串， findString 为被替换的字符，replaceString --要替换的字符，num 替换次数（可以忽略，则全部替换），如：
string.gsub(mainString,findString,replaceString,num)
string.gsub("aaaa","a","z",3);

string.find (str, substr, [init, [end]])
在一个指定的目标字符串中搜索指定的内容(第三个参数为索引),返回找到的起止位置。不存在则返回 nil。
string.find("Hello Lua user", "Lua", 1) 

string.reverse(arg)

string.format(...)
string.format("the value is:%d",4)

string.char(arg) 和 string.byte(arg[,int])
-- char 将整型数字转成字符并连接， byte 转换字符为整数值(可以指定某个字符，默认第一个字符)。
string.char(97,98,99,100)  --abcd
string.byte("ABCD",4)   -- 68

string.len(arg)

string.rep(string, n))  -- 返回字符串string的n个拷贝（重复n遍）

--链接两个字符串
print("www.w3cschool"..".cn")
```

